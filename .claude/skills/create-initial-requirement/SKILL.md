---
name: create-initial-requirement
description: >
  アイデア段階の曖昧な構想を、対話（壁打ち）を通じて
  「何を作るか」を明確にする機能要件整理スキル。
  ユーザーの思考の解像度を段階的に上げ、機能の輪郭・境界・優先順位を確定させる。
  技術的な実装仕様（スペック駆動開発）は別スキルの担当であり、
  このスキルはあくまで「何を作るか・なぜ作るか・何を作らないか」を整理する。
  以下のような場面で使うこと:
  「こういう機能を作りたい」「アイデアがある」「要件を整理したい」
  「壁打ちしたい」「何を作るか決めたい」「機能を洗い出したい」と言った場合、
  新機能の追加や改修を検討している場合、漠然とした構想を具体化したい場合。
  「要件定義」「要件」「壁打ち」「アイデア」「機能追加」「機能検討」
  「何を作るか」「PRD」「プロダクト要件」「機能設計」「機能洗い出し」
  「スコープ」「優先順位」といったキーワードが出たら積極的にこのスキルを使うこと。
---

# Feature Ideation Skill — 壁打ちで「何を作るか」を決める

アイデア段階の構想を対話的に整理し、
**機能の輪郭・境界・優先順位**を確定させるスキル。

> **このスキルの守備範囲**: 「何を作るか」「なぜ作るか」「何を作らないか」
> **守備範囲外**: 技術選定、実装仕様、データモデル設計、API設計
> → それらは `/setup-project` 以降のスキル群で整理する

## パイプライン上の位置づけ

```
create-initial-requirement（このスキル）
    ↓ 出力: docs/ideas/initial-requirement.md
/setup-project
    ↓ prd-writing が docs/ideas/ を読み込んで PRD を作成
    ↓ 以降 architecture-design → functional-design → ...
```

- **入力**: ユーザーの頭の中にあるアイデア・構想
- **出力**: `docs/ideas/initial-requirement.md`
- **後続**: `/setup-project` コマンド（prd-writing スキルがこの出力を読み込む）

## 基本姿勢

壁打ち相手として以下を徹底する:

- **問いかけで導く** — 答えを押し付けず、質問で思考を促す
- **選択肢を提示する** — オープンすぎる質問を避け、2-3択で判断を助ける
- **暗黙知を言語化する** — ユーザーが「当然」と思っている前提を引き出す
- **トレードオフを可視化する** — 各選択の利点・欠点を並べて比較させる
- **スコープを守る** — アイデアの発散を許しつつ、定期的に境界を確認する
- **1回の質問は1-2個** — 大量に問いかけてユーザーを圧倒しない

---

## ワークフロー

```
Phase 1: Capture（捕捉）     — 何を、なぜ作りたいのか
    ↓
Phase 2: Explore（探索）     — 機能の輪郭と境界を描く
    ↓
Phase 3: Prioritize（優先度）— 何を先に、何をやらないか
    ↓
Output: 機能要件サマリー出力
```

フェーズは目安であり厳密に順番通りでなくてよい。
ただし Output に入る前に Phase 2 の「やらないことリスト」が必ずあることを確認する。

---

## Phase 1: Capture（捕捉）

**目的**: 頭の中の漠然としたイメージを言葉にする。

### 引き出す情報

| 問い                               | 狙い                       |
| ---------------------------------- | -------------------------- |
| 一言で言うと何を作りたい？         | プロダクト/機能の輪郭      |
| 何が困っている・不便？             | 解決すべき課題             |
| 誰が使う？                         | ユーザー像                 |
| 今はどうやっている？               | 現状の回避策・ペインの深さ |
| いつまでに必要？                   | 時間的制約                 |
| どこで使う？（PC / スマホ / 現場） | 利用コンテキスト           |

### 対話のコツ

- 一文の回答 → 「もう少し聞かせてください」
- 長い回答 → 要約して「つまり〜ですね？」と確認
- 複数アイデア混在 → 「今回のスコープはどこまで？」と絞り込み

### 完了条件

- [ ] 作るものの一言説明ができる
- [ ] 解決する課題が言語化されている
- [ ] 主要ユーザーが特定されている
- [ ] 大まかなスコープの境界がある

---

## Phase 2: Explore（探索）

**目的**: 機能の境界線を引き、見落としを洗い出す。

### 2-1. ユーザーストーリーの列挙

「〜として、〜したい。なぜなら〜だから」の形式で、最低3つ集める。

```
例: 店舗オーナーとして、売上の日次推移をグラフで見たい。
    なぜなら、曜日ごとの傾向を把握してシフトを最適化したいから。
```

典型的なシナリオだけでなく、以下も探る:

- 初回利用時のシナリオ（オンボーディング）
- エラーや例外が起きたときのシナリオ
- 管理者や別ロールのシナリオ（いれば）

### 2-2. やらないことリスト（Negative Scope）

**これがこのスキルで最も重要な成果物の1つ。**
スコープ外を明示することで、後続の実装フェーズでの暴走を防ぐ。

```
例: 今回やらないこと:
- 多言語対応
- オフライン対応
- 外部サービス連携（Slack通知等）
- 管理者向け機能
```

やらないことを決めるためのフレーム:

- 「よくある要望だけど今回は？」
- 「将来やりたいけど今は見送るものは？」
- 「似たサービスと比べて、あえて持たない機能は？」

### 2-3. 既存システム・業務との関係

- 連携が必要なシステムはあるか
- データの移行は必要か
- 既存の業務フローのどこに組み込まれるか

### 2-4. 利用環境・制約の確認

| 確認項目         | 質問例                     |
| ---------------- | -------------------------- |
| 想定ユーザー数   | 数人？数百人？数万人？     |
| データ量の規模感 | 数十件？数万件？           |
| 認証の要否       | ログイン必要？匿名OK？     |
| データの機密性   | 公開OK？ユーザー別に分離？ |
| 利用頻度         | 毎日使う？月1回？          |

### 完了条件

- [ ] ユーザーストーリーが3つ以上ある
- [ ] やらないことリストがある
- [ ] 外部連携先が特定されている（なければ「なし」と明記）
- [ ] 利用環境と規模感が把握できている

**Phase 2 完了時点で「ここまでの整理」をユーザーに見せて確認する。**

---

## Phase 3: Prioritize（優先度付け）

**目的**: 何を先に作るか、何を削るかを決める。

### 3-1. 機能リストの作成

Phase 2 のストーリーから機能を抽出し、フラットなリストにする。

```
例:
- ユーザー登録・ログイン
- ダッシュボード（概要表示）
- データ一覧表示
- データ新規登録
- データ編集・削除
- グラフ表示
- CSV エクスポート
- 通知設定
```

### 3-2. MoSCoW 分類

| 分類       | 意味         | 判断の問い                               |
| ---------- | ------------ | ---------------------------------------- |
| **Must**   | 必須         | 「これがないと使い物にならない？」       |
| **Should** | 重要         | 「なくても最低限動くが、ないと不満？」   |
| **Could**  | あると良い   | 「あったら嬉しいが、なくても困らない？」 |
| **Won't**  | 今回やらない | 「今回は明確に見送り」                   |

ユーザーに分類してもらう際のコツ:

- 「もし開発期間が半分になったら、何を残しますか？」で Must を炙り出す
- Won't は Phase 2 のやらないことリストと統合する

### 3-3. 実装順序の整理

Must 機能の中での依存関係と順序を確認する。

```
例:
Phase 1（MVP）: ユーザー登録 → データ登録 → 一覧表示
Phase 2: グラフ表示 → CSV エクスポート
Phase 3: 通知設定
```

### 完了条件

- [ ] 全機能がMoSCoW分類されている
- [ ] Must機能の実装順序が決まっている
- [ ] Won't がやらないことリストと整合している

---

## Output: 機能要件サマリー

**すべてのフェーズが完了したら、機能要件サマリーをMarkdownで出力する。**

出力前に `references/output-template.md` を `Read` ツールで読み込み、
テンプレートに沿って出力すること。

出力は `docs/ideas/initial-requirement.md` に保存する。
このファイルが `/setup-project` 実行時に prd-writing スキルへの入力となる。

---

## 対話ガイドライン

### 質問パターンの参照

各フェーズで効果的な質問の仕方に迷ったら、
`references/question-patterns.md` を `Read` ツールで読み込むこと。

### 中断と再開

対話が長くなった場合、「ここまでの状態を保存して」と言われたら、
現在のフェーズと確定事項をMarkdownファイルとして出力する。

### フェーズ間のナビゲーション

- 各フェーズの完了条件をチェックリストで提示し、ユーザーと確認しながら進める
- ユーザーが先に進みたがっている場合は柔軟に対応する
- ただし Phase 2 の「やらないことリスト」だけは飛ばさない

---

## リファレンス

| やりたいこと               | 読むべきファイル                  |
| -------------------------- | --------------------------------- |
| 最終出力のフォーマット確認 | `references/output-template.md`   |
| 各フェーズの質問パターン   | `references/question-patterns.md` |

```
references/
├── output-template.md      最終出力テンプレート
└── question-patterns.md    フェーズ別の質問パターン集
```

