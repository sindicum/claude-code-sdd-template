# タスクリスト

## 🚨 タスク完全完了の原則

**このファイルの全タスクが完了するまで作業を継続すること**

### 必須ルール

- **全てのタスクを`[x]`にすること**
- 「時間の都合により別タスクとして実施予定」は禁止
- 「実装が複雑すぎるため後回し」は禁止
- 未完了タスク（`[ ]`）を残したまま作業を終了しない

### 実装可能なタスクのみを計画

- 計画段階で「実装可能なタスク」のみをリストアップ
- 「将来やるかもしれないタスク」は含めない
- 「検討中のタスク」は含めない

### タスクスキップが許可される唯一のケース

以下の技術的理由に該当する場合のみスキップ可能:

- 実装方針の変更により、機能自体が不要になった
- アーキテクチャ変更により、別の実装方法に置き換わった
- 依存関係の変更により、タスクが実行不可能になった

スキップ時は必ず理由を明記:

```markdown
- [x] ~~タスク名~~（実装方針変更により不要: 具体的な技術的理由）
```

### タスクが大きすぎる場合

- タスクを小さなサブタスクに分割
- 分割したサブタスクをこのファイルに追加
- サブタスクを1つずつ完了させる

### フェーズ設計の原則

- **各フェーズに「実装」と「テスト」を含める**
- 実装後すぐにテストし、問題を早期発見する
- 最終フェーズまでテストを先送りしない
- フェーズ終了時点で、そのフェーズの成果物が正しく動作することを確認する

### テスト戦略

各フェーズで適切なテストを実施する:

| テスト種類     | 対象                   | 実施タイミング               |
| -------------- | ---------------------- | ---------------------------- |
| ユニットテスト | 関数・モジュール単体   | 実装直後（各フェーズ内）     |
| 統合テスト     | 複数コンポーネント連携 | 機能完成後（複数フェーズ後） |
| E2Eテスト      | ユーザーシナリオ全体   | 機能群完成後（終盤フェーズ） |

**原則**:

- ユニットテスト: 各フェーズで実装したコードに対して即座に作成
- 統合テスト: 機能が連携するタイミングで作成（例: API + UI）
- E2Eテスト: ユーザーフロー全体が実装完了後に作成

### テストタスクの必須ルール

**テストコード作成は必須タスクである**:

- 各フェーズの「テスト」には**テストファイル作成タスク**（Vitest or Playwright）を必ず含める
- `npm run typecheck` や `npm run lint` はテストの代替にならない
- 「手動動作確認」はテストコードの**補助**であり、**代替**ではない

**テストコード免除が認められるケース**:

- ブラウザランタイム（Canvas/WebGL等）に強く依存し、モックが困難なUIコンポーネント
- 外部APIの薄いラッパーでロジックがほぼない場合
- 免除時の書式: `- [x] ~~ユニットテスト作成~~（テスト免除: {具体的な技術的理由}）`

**禁止される置換パターン**:

- 「テストファイル作成」を「手動動作確認」に置換することは禁止
- 「テストファイル作成」を「型エラーがないことを確認」に置換することは禁止

---

## フェーズ1: {フェーズ名}

- [ ] {タスク1}
  - [ ] {サブタスク1-1}
  - [ ] {サブタスク1-2}
- [ ] {タスク2}
  - [ ] {サブタスク2-1}
  - [ ] {サブタスク2-2}
- [ ] フェーズ1のテスト
  - [ ] テストファイル作成: `{テストファイルパス}` （必須: 実装した関数/モジュールのユニットテスト）
  - [ ] テスト実行確認: `npm test` が通ることを確認
  - [ ] 手動動作確認（{確認内容}）※補助的な確認

## フェーズ2: {フェーズ名}

- [ ] {タスク1}
  - [ ] {サブタスク1-1}
  - [ ] {サブタスク1-2}
- [ ] {タスク2}
- [ ] フェーズ2のテスト
  - [ ] テストファイル作成: `{テストファイルパス}` （必須: 実装した関数/モジュールのユニットテスト）
  - [ ] テスト実行確認: `npm test` が通ることを確認
  - [ ] 統合テスト作成: `{テストファイルパス}` ※機能連携がある場合
  - [ ] 手動動作確認（{確認内容}）※補助的な確認

## フェーズN-1: E2Eテスト

- [ ] E2Eテスト環境セットアップ
  - [ ] Playwright設定
- [ ] E2Eテスト作成
  - [ ] {シナリオ1: ユーザーフロー}
  - [ ] {シナリオ2: ユーザーフロー}
- [ ] 全E2Eテスト実行確認

## フェーズN: 最終品質チェック

- [ ] すべてのテストが通ることを確認
  - [ ] `npm test`（ユニットテスト・統合テスト）
  - [ ] `npm run test:e2e`（E2Eテスト）
- [ ] リントエラーがないことを確認
  - [ ] `npm run lint`
- [ ] 型エラーがないことを確認
  - [ ] `npm run typecheck`
- [ ] ビルドが成功することを確認
  - [ ] `npm run build`

## フェーズN+1: ドキュメント更新

- [ ] README.md を更新（必要に応じて）
- [ ] 実装後の振り返り（このファイルの下部に記録）

---

## 実装後の振り返り

### 実装完了日

{YYYY-MM-DD}

### 計画と実績の差分

**計画と異なった点**:

- {計画時には想定していなかった技術的な変更点}
- {実装方針の変更とその理由}

**新たに必要になったタスク**:

- {実装中に追加したタスク}
- {なぜ追加が必要だったか}

**技術的理由でスキップしたタスク**（該当する場合のみ）:

- {タスク名}
  - スキップ理由: {具体的な技術的理由}
  - 代替実装: {何に置き換わったか}

**⚠️ 注意**: 「時間の都合」「難しい」などの理由でスキップしたタスクはここに記載しないこと。全タスク完了が原則。

### 学んだこと

**技術的な学び**:

- {実装を通じて学んだ技術的な知見}
- {新しく使った技術やパターン}

**プロセス上の改善点**:

- {タスク管理で良かった点}
- {ステアリングファイルの活用方法}

### 次回への改善提案

- {次回の機能追加で気をつけること}
- {より効率的な実装方法}
- {タスク計画の改善点}
