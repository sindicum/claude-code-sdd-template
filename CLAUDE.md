# プロジェクトメモリ

## 概要

- 本ドキュメントは、本プロジェクトにおける開発の基本方針・標準ルール・ドキュメント管理方針を定義する永続的なプロジェクトメモリである。
- 本ドキュメントを基準として意思決定・実装を行う。

## 開発ワークフロー

### 基本フロー

1. 要件整理: 壁打ち対話で「何を作るか」を明確化 → `docs/ideas/`
2. ドキュメント作成: 永続ドキュメント(`docs/`)で「何を作るか」「どう作るか（基本設計）」を定義
3. 作業計画: ステアリングファイル(`.steering/`)で「今回何をするか」を計画
4. 実装: tasklist.md に従って実装し、進捗を随時更新
5. 検証: テストと動作確認
6. 更新: 必要に応じてドキュメント更新

#### ドキュメント作成時

**初回セットアップ (`/setup-project`) の場合:**

- PRD（product-requirements.md）のみユーザーの承認を得る
- PRD承認後、残り5つのドキュメントはPRDを元に自動生成する

**個別にドキュメントを作成・更新する場合:**

- 1 ファイルずつ作成し、必ずユーザーの承認を得てから次に進む

承認待ちの際は、明確に伝える:

```
「[ドキュメント名]の作成が完了しました。内容を確認してください。
承認いただけたら次のドキュメントに進みます。」
```

#### 実装前の確認

新しい実装を始める前に、必ず以下を確認:

1. CLAUDE.md を読む
2. 関連する永続ドキュメント(`docs/`)を読む
3. Grep で既存の類似実装を検索
4. 既存パターンを理解してから実装開始

#### ステアリングファイル管理

作業ごとに `.steering/[NNN]_[YYYYMMDD]_[タスク名]/` を作成:

- `requirements.md`: 今回の要求内容
- `design.md`: 実装アプローチ
- `tasklist.md`: 具体的なタスクリスト

命名規則: `001_20250115_add-user-profile` 形式（3桁通し番号 + 日付 + タスク名）
新規作成時は `.steering/` 内の既存ディレクトリを走査し、最大番号+1を採番

#### ステアリングファイルの管理

**作業計画・実装・検証時は`steering`スキルを使用してください。**

- **作業計画時**: `Skill('steering')`でモード 1(ステアリングファイル作成)
- **実装時**: `Skill('steering')`でモード 2(実装と tasklist.md 更新管理)
- **検証時**: `Skill('steering')`でモード 3(振り返り)

詳細な手順と更新管理のルールは steering スキル内に定義されています。

## ディレクトリ構造

### 永続的ドキュメント(`docs/`)

アプリケーション全体の「何を作るか」「どう作るか」を定義:

#### 下書き・アイデア（`docs/ideas/`）

- create-initial-requirement スキルの出力先
- 壁打ち・ブレインストーミングの成果物
- 技術調査メモ
- `/setup-project` 実行時に prd-writing スキルが読み込む（必須インプット）

#### 正式版ドキュメント(`docs/*.md`)

- **product-requirements.md** - プロダクト要求定義書
- **functional-design.md** - 機能設計書
- **architecture.md** - 技術仕様書
- **repository-structure.md** - リポジトリ構造定義書
- **development-guidelines.md** - 開発ガイドライン
- **glossary.md** - ユビキタス言語定義

### 作業単位のドキュメント(`.steering/`)

特定の開発作業における「今回何をするか」を定義:

- `requirements.md`: 今回の作業の要求内容
- `design.md`: 変更内容の設計
- `tasklist.md`: タスクリスト

## 開発プロセス

### 初回セットアップ

1. このテンプレートを使用
2. 「壁打ちしたい」「アイデアを整理したい」等で要件整理（create-initial-requirement スキル → `docs/ideas/`）
3. `/setup-project` で永続的ドキュメント作成（`docs/ideas/` を入力として 6 つ作成）
4. `/initial-feature` で初回実装（P0機能全てをスキャフォールドから実装）
5. `/add-feature [機能]` で機能追加（2回目以降の機能実装）

### 日常的な使い方

**基本は普通に会話で依頼してください:**

```bash
# 要件整理(壁打ち・アイデア具体化)
> アイデアを整理したい
> 壁打ちしたい
> こういう機能を作りたいんだけど...

# ドキュメントの編集
> PRDに新機能を追加してください
> architecture.mdのパフォーマンス要件を見直して
> glossary.mdに新しいドメイン用語を追加

# 初回実装(ドキュメント作成後の最初の実装)
> /initial-feature

# 機能追加(2回目以降の定型フロー)
> /add-feature ユーザープロフィール編集

# 詳細レビュー(詳細なレポートが必要なとき)
> /review-docs docs/product-requirements.md

# 進捗確認
> /status

# 設計の整合性チェック
> /validate-design

# 実装と仕様のギャップ分析
> /validate-gap

```

## ドキュメント管理の原則

### 永続的ドキュメント(`docs/`)

- 基本設計を記述
- 頻繁に更新されない
- プロジェクト全体の「北極星」

### 作業単位のドキュメント(`.steering/`)

- 特定の作業に特化
- 作業ごとに新規作成
- Git管理下に置く（作業履歴として保持）
- 作業完了後もリポジトリに保持（開発履歴の参照用）
