# validate-design

`docs/` 内のドキュメント間の整合性を検証する。

## 目的

設計書間の矛盾や不整合を早期に発見し、実装前に解決する。

## 検証観点

| チェック | 内容 |
|---------|------|
| PRD ↔ 機能設計 | 要件の網羅性（PRD の要件が機能設計で実現されているか） |
| 機能設計 ↔ アーキテクチャ | 技術的実現可能性（機能がアーキテクチャで実現可能か） |
| アーキテクチャ ↔ リポジトリ構造 | 構成の一貫性（技術選定とディレクトリ構造が整合するか） |
| 全体 ↔ 用語集 | 用語の統一性（各ドキュメントで用語が統一されているか） |

## 実行フロー

### Step 1: ドキュメントの存在確認

```
Glob("docs/*.md")
```

以下のファイルの存在を確認:
- `product-requirements.md`
- `functional-design.md`
- `architecture.md`
- `repository-structure.md`
- `glossary.md`

### Step 2: doc-reviewer サブエージェントの起動

整合性チェックに特化したプロンプトで `doc-reviewer` を起動:

```
Task(subagent_type="doc-reviewer", prompt="
docs/ 内のドキュメント間の整合性を検証してください。

検証観点:
1. PRD ↔ 機能設計: 要件の網羅性
2. 機能設計 ↔ アーキテクチャ: 技術的実現可能性
3. アーキテクチャ ↔ リポジトリ構造: 構成の一貫性
4. 全体 ↔ 用語集: 用語の統一性

各観点について OK/NG を判定し、NG の場合は具体的な不整合箇所を指摘してください。
")
```

### Step 3: 結果の出力

以下の形式でコンソールに出力:

```
🔍 設計整合性チェック

📄 対象ドキュメント:
  - product-requirements.md
  - functional-design.md
  - architecture.md
  - repository-structure.md
  - glossary.md

📊 チェック結果:

✅ PRD ↔ 機能設計: OK
  - すべての要件が機能設計でカバーされています

⚠️ 機能設計 ↔ アーキテクチャ: 2件の不整合
  - [具体的な不整合1]
  - [具体的な不整合2]

✅ アーキテクチャ ↔ リポジトリ構造: OK
  - ディレクトリ構造が技術選定と整合しています

⚠️ 用語の統一性: 1件の不整合
  - [統一されていない用語の例]

📋 推奨アクション:
  1. [優先度順の修正提案]
  2. [優先度順の修正提案]
```

## ドキュメントが不足している場合

```
⚠️ 以下のドキュメントが見つかりません:
  - [不足しているファイル名]

💡 /setup-project を実行してドキュメントを作成してください。
```

## 使用ツール

- Glob: ドキュメントの存在確認
- Read: 各ドキュメントの読み込み
- Task (doc-reviewer): 整合性分析
